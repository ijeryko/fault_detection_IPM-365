<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Monitoring System - SPARK</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}">  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      padding: 0;
      background-color: #000000;
      color: #333;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      height: 100vh;
      overflow: hidden;
    }
    .header {
      background: linear-gradient(135deg, #1d2125, #3e494c);
      color: white;
      padding: 1.2rem 2.5rem;
      display: flex;
      align-items: center;
      gap: 1rem;
      box-shadow: 0 4px 20px rgba(0,0,0,0.15);
      position: flex;
      z-index: 10;
      font-family: "Century Gothic", CenturyGothic, sans-serif;

    }
    .header h2 { margin: 0; font-size: 1.4rem; font-weight: 600; }
    .profile { margin-left: auto; display: flex; align-items: center; gap: 10px;   font-family: "Century Gothic", CenturyGothic, sans-serif;}
    .profile-img { 
      height: 45px;          /* Keep the height consistent with your header */
      width: auto;           /* Let the width grow to fit the long logo */
      border-radius: 4px;    /* Use a small number (or 0) instead of 50% */
      border: none;          /* Remove the thick white border if it cuts into the logo */
      object-fit: contain;   /* Ensures the whole logo is visible without clipping */
}    .profile-name { font-size: 1.15rem; font-weight: 600; }
    .main-container { display: flex; height: calc(100vh - 85px); overflow: hidden; }
    .sidebar {
      width: 300px;
      background: rgba(221, 216, 216, 0.95);
      backdrop-filter: blur(20px);
      padding: 2.5rem 1.5rem;
      display: flex;
      flex-direction: column;
      gap: 1.2rem;
      box-shadow: 4px 0 30px rgba(0,0,0,0.08);
    }
    .sidebar-item { display: flex; align-items: center; gap: 1rem; padding: 1.2rem 1.2rem 1.2rem 0; border-radius: 0 30px 30px 0; cursor: pointer; transition: all 0.3s cubic-bezier(0.4,0,0.2,1); position: relative; font-weight: 500; font-size: 1rem; }
    .sidebar-item:hover { background: rgba(0,212,255,0.15); padding-left: 1.5rem; color: #8c959b; transform: translateX(5px); }
    .sidebar-item.active { background: linear-gradient(90deg, rgba(133, 181, 190, 0.3), rgba(75, 75, 75, 0.3)); color: #0d0e0f; font-weight: 600; padding-left: 1.5rem; }
    .sidebar-item.active .dot { background: #7e8283; box-shadow: 0 0 10px rgba(91, 155, 168, 0.6); }
    .dot { width: 12px; height: 12px; border-radius: 50%; background: rgba(145, 151, 152, 0.6); transition: all 0.3s; flex-shrink: 0; }
    .sidebar-item i { width: 22px; font-size: 1.15rem; opacity: 0.85; }
    .content {
      flex: 1;
      padding: 2.5rem;
      overflow-y: auto;
      display: grid;
      grid-template-columns: 1fr 1fr;
      grid-template-rows: auto 1fr auto;
      column-gap: 2rem;
      align-content: start;
    }
    .chart-container {
      background: rgba(183, 181, 181, 0.9);
      backdrop-filter: blur(15px);
      border-radius: 20px;
      padding: 2rem;
      box-shadow: 0 8px 40px rgba(0,0,0,0.12);
      height: 500px;
      display: flex;
      flex-direction: column;
    }

    .chart-titles{ font-size: 1.5rem; font-family: "Century Gothic", CenturyGothic, sans-serif; font-weight: 600; color: #3a4d50; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.75rem;text-align: left; justify-content: center; }
    .chart-title { font-size: 1.3rem; font-family: "Century Gothic", CenturyGothic, sans-serif; font-weight: 600; color: #0099cc; margin-bottom: 0.1rem; display: flex; align-items: center; gap: 0.75rem; }
    .chart-placeholder {
      flex: 1;
      background: linear-gradient(135deg, #f0f8ff 0%, #e6f3ff 100%);
      border-radius: 10px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      color: #0099cc;
      font-size: 1.1rem;
      gap: 1rem;
      position: relative;
      overflow: hidden;
    }
    .chart-placeholder::before {
      content: '';
      position: absolute;
      top: 10;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
    }
    @keyframes shimmer { 0% { left: -100%; } 100% { left: 100%; } }
    .chart-placeholder i { font-size: 3rem; opacity: 0.6; }
    .status-grid { grid-column: 1 / -1; display: grid; grid-template-columns: 1fr; gap: 1rem;column-gap: 2rem; align-items: flex-end; }
    .status-card { background: rgba(200, 198, 198, 0.9); backdrop-filter: blur(15px); padding: 2.5rem; border-radius: 40px; box-shadow: 0 8px 10px rgba(0,0,0,0.12); border: 1px solid rgba(0,212,255,0.2); text-align: left;display: flex; align-items: center; justify-content: flex-start;}
    .status-value { font-size: 2rem; font-weight: bold; color: #1e3a3aed; margin-bottom: 0.5rem; width: 160px;}
    .status-label { color: #363535; font-family: "Century Gothic", CenturyGothic, sans-serif; font-weight: bold; font-size: 1.1rem; display: flex; flex-direction: row;}
    .events-section { grid-column: 1 / -1; background: rgba(255,255,255,0.9); backdrop-filter: blur(15px); border-radius: 20px; padding: 2.5rem; box-shadow: 0 8px 40px rgba(0,0,0,0.12); border: 1px solid rgba(0,212,255,0.2); }
    .events-header { display: grid; font-family: "Century Gothic", CenturyGothic, sans-serif; grid-template-columns: 1fr 1fr 1fr; text-align: center; gap: 2rem; margin-bottom: 2rem; font-weight: 600; color: #566468; padding-bottom: 1rem; border-bottom: 2px solid rgba(102, 112, 114, 0.3); }
    .event-row { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 2rem; text-align: center; padding: 1.5rem 0; border-bottom: 1px solid rgba(0,0,0,0.05); align-items: center; }
    .label { padding: 0.2rem 1rem; border-radius: 25px; font-size: 2rem; font-weight: 500; align-items: center;}
    .label-healthy { background: #d4edda; text-align: center; color: #155724; }
    .label-off { background: #f8d7da; text-align: center; color: #524b4c; }

    @media (max-width: 1200px) {
      .content { grid-template-columns: 1fr; gap: 2rem; padding: 2rem; }
      .status-grid { grid-template-columns: 1fr; gap: 2rem; }
    }
    @media (max-width: 768px) {
      .sidebar { position: absolute; width: 280px; height: 100%; z-index: 20; transform: translateX(-100%); transition: transform 0.3s; }
      .sidebar.open { transform: translateX(0); }
      .main-container { position: relative; }
    }
  </style>
</head>
<body>
  <header class="header">
    <a href="{{ url_for('home') }}" style="text-decoration: none; color: inherit; display: flex; align-items: center;">
      <i class="fas fa-arrow-left fa-lg" style="cursor: pointer; opacity: 0.9;"></i>
    </a>
    
    <h2>Monitoring Dashboard</h2>
    
    <div class="profile">
      <img src="{{ url_for('static', filename='images/PDM.png') }}" alt="SPARK PdM Logo" class="profile-img">
    </div>
  </header>

  <div class="main-container">
    <nav class="sidebar" id="sidebar">
      <div class="sidebar-item active"><div class="dot"></div><i class="fas fa-tachometer-alt"></i><span>Dashboard</span></div>
      <div class="sidebar-item"><div class="dot"></div><i class="fas fa-cog"></i><span>History</span></div>
    </nav>

    <main class="content">
      <div class="chart-container">
        <div class="chart-titles">
          <i class="fas fa-radar-chart"></i> VISUAL FAULT
        </div>

        <div class="chart-placeholder">
          <video id="fault-video" autoplay muted loop playsinline 
                style="width: 150%; height: 100%; object-fit: cover; border-radius: 10px;">
              <source id="video-source" src="{{ url_for('static', filename='videos/waiting.mp4') }}" type="video/mp4">
              Your browser does not support the video tag.
          </video>
        </div>
      </div>

      <div class="chart-container">
        <div class="chart-title"><i class="fas fa-spectrogram"></i></div>
        <div class="status-grid">
          <div class="status-card">
            <div class="status-label">Accuracy:</div>
            <div id="current-accuracy" class="status-value">0%</div>
          </div>

          <div class="status-card">
            <div class="status-label">Connection:</div>
            <div id="connection-status" class="status-value">Connecting...</div>
          </div>

          <div class="status-card">
            <div class="status-label">Status:</div>
            <div id="current-status" class="status-value">Waiting</div>
          </div>
        </div>
      </div>

      <div class="events-section">
        <div class="events-header">
          <span>Label</span>
          <span>Accuracy</span>
          <span>Timestamp</span>
        </div>
        <div id="events-body"></div>
      </div>
    </main>
  </div>

  <script>
    const menuToggle = document.getElementById('menu-toggle');
    const sidebar = document.getElementById('sidebar');
    menuToggle.addEventListener('click', () => sidebar.classList.toggle('open'));

    document.querySelectorAll('.sidebar-item').forEach(item => {
      item.addEventListener('click', () => {
        document.querySelector('.sidebar-item.active')?.classList.remove('active');
        item.classList.add('active');
      });
    });
  </script>

  <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
  <script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
</body>
</html>